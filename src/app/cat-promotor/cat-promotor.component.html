<div class="row">
    <div class="col-md-12">
        <br>
        <br>
        <div scroll-here class="card">
            <div id="ref_scroll" class="card-header card-header-tabs card-header-info">
                <div class="nav-tabs-navigation">
                    <div class="nav-tabs-wrapper">
                        <!--<span class="nav-tabs-title">Tasks:</span>-->
                        <ul class="nav nav-tabs" data-tabs="tabs">
                            <li class="nav-item active"><a mat-button class="nav-link active" href="#lista_promotores"
                                    data-toggle="tab">Lista de Promotores<div class="ripple-container"></div></a></li>
                            <li class="nav-item "><a mat-button class="nav-link " href="#detalles_promotor"
                                    data-toggle="tab">Detalles del promotor<div class="ripple-container"></div></a></li>
                            <li class="nav-item "><a mat-button class="nav-link " href="#asignacion_rutas"
                                    data-toggle="tab">Asignaci√≥n de rutas<div class="ripple-container"></div></a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card-body">
                <div class="tab-content">
                    <!-- Div dinamico -->
                    <div class="tab-pane active" id="lista_promotores">
                        <!-- Here is the content -->
                        <br>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="input-group no-border">
                                    <input type="text" value="" class="form-control" placeholder="Buscar promotor"
                                        (keyup)="changeText($event)">

                                </div>
                            </div>

                            <div class="col-md-3">
                                <mat-form-field class="example-full-width">
                                    <mat-select [(value)]="dia" name="dia" [(ngModel)]="dia">
                                        <mat-option [value]="0">--Todos los dias--</mat-option>
                                        <mat-option [value]="1">Lunes</mat-option>
                                        <mat-option [value]="2">Martes</mat-option>
                                        <mat-option [value]="3">Miercoles</mat-option>
                                        <mat-option [value]="4">Jueves</mat-option>
                                        <mat-option [value]="5">Viernes</mat-option>
                                        <mat-option [value]="6">Sabado</mat-option>
                                        <mat-option [value]="7">Domingo</mat-option>
                                        <!--Seccion para cargar datos desde el catalogo de empresa-->
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-3">
                                <a class="btn btn-info pull-right" href="javascript:void(0)" (click)="search(0)">
                                    <i class="material-icons" style="font-size: 20px" data-md-tooltip="Buscar">
                                        search
                                    </i>
                                </a>
                            </div>

                            <div class="col-md-3">
                                <button mat-raised-button type="button" class="btn btn-info pull-right"
                                    (click)="selectNewCatPromotor();setSelectedTab('detalles_promotor');selectCatPromotor(selectedCatPromotor);">Nuevo</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-header card-header-info">
                                        <h4 class="card-title ">Catalogo de promotores</h4>
                                        <p class="card-category"> Aqui se muestra todos los promotores disponibles</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">

                                            <a *ngIf="prom != null" class="btn btn-info pull-right"
                                                href="javascript:void(0)"
                                                (click)="exportarExcel.exportarExcel(prom, encabezados)">
                                                <i class="material-icons" style="font-size: 20px"
                                                    data-md-tooltip="Exportar a Excel">
                                                    cloud_download
                                                </i>
                                            </a>

                                            <div class="clearfix"></div>

                                            <mat-paginator #pag *ngIf="prom != null" [length]="prom.length"
                                                [pageSize]="paginacion.page_size"
                                                [pageSizeOptions]="paginacion.pageSizeOptions"
                                                (page)="paginacion.handlePage($event)">
                                            </mat-paginator>

                                            <table class="table">
                                                <thead class=" text-info">
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Empresa
                                                        <br>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(2)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Desc">
                                                                arrow_drop_down
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(1)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Asc">
                                                                arrow_drop_up
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Nombre
                                                        <br>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(4)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Desc">
                                                                arrow_drop_down
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(3)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Asc">
                                                                arrow_drop_up
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Apellidos
                                                        <br>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(6)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Desc">
                                                                arrow_drop_down
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(5)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Asc">
                                                                arrow_drop_up
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Usuario
                                                        <br>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(8)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Desc">
                                                                arrow_drop_down
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                        <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                            (click)="search(7)">
                                                            <i class="material-icons" style="font-size: 20px"
                                                                data-md-tooltip="Orden Asc">
                                                                arrow_drop_up
                                                            </i>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Uda
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Fda
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Udc
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Fdc
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Estatus
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Editar
                                                    </th>
                                                    <th style="background-color: #007A87; color: #FFFFFF;">
                                                        Eliminar
                                                    </th>
                                                </thead>
                                                <tbody *ngIf="prom != null">
                                                    <tr
                                                        *ngFor="let promotor of prom | paginate:paginacion.page_size:paginacion.page_number">
                                                        <td>{{ promotor.nombreempresa }}</td>
                                                        <td>{{ promotor.nombre }}</td>
                                                        <td>{{ promotor.apellidos }}</td>
                                                        <td>{{ promotor.idusuario }}</td>
                                                        <td>{{ promotor.uda }}</td>
                                                        <td>{{ promotor.fda_m }}</td>
                                                        <td>{{ promotor.udc }}</td>
                                                        <td>{{ promotor.fdc_m }}</td>
                                                        <td><button mat-raised-button type="button"
                                                                class="btn {{promotor.btn_estilo}} pull-right"
                                                                (click)="selectCatPromotor(promotor,1)"
                                                                [disabled]="noPermitido">
                                                                {{ promotor.estatus_btn }}</button>
                                                        </td>
                                                        <td>
                                                            <button mat-raised-button type="button"
                                                                class="btn btn-warning pull-right"
                                                                (click)="selectCatPromotor(promotor);setSelectedTab('detalles_promotor')">Editar</button>
                                                        </td>
                                                        <td><button mat-raised-button type="button"
                                                                class="btn btn-danger pull-right"
                                                                (click)="deleteCatPromotor(promotor.idpromotor)"
                                                                [disabled]="noPermitido">Borrar</button></td>
                                                    </tr>
                                                </tbody>
                                            </table>


                                        </div>
                                    </div>
                                </div>

                                <!--Inicia bloqueador mientras procesa-->
                                <div id="bloqueador_cat_promotor" class="row"
                                    style="position: absolute;width:100%;top:0;left:0;width:100%;height:100%">
                                    <div class="col"
                                        style="background-color:rgba(10, 9, 9, 0.062);z-index:1;display: flex;align-items: center;">
                                        <mat-progress-spinner style="margin: 0 auto;" mode="indeterminate" diameter="85"
                                            strokeWidth="10">
                                        </mat-progress-spinner>
                                        <div
                                            style="position:absolute;left:calc((100% /2) - 4%);margin:0 auto;color:blue">
                                            Cargando...
                                        </div>
                                    </div>
                                </div>
                                <!--Fin bloqueador mientras procesa -->

                            </div>
                        </div>
                    </div>
                    <div class="tab-pane " id="detalles_promotor">
                        <!-- Here is the content -->
                        <br>
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header card-header-info">
                                    <h4 class="card-title">Editar promotor</h4>
                                    <p class="card-category">Ingrese la informaci&oacute;n solicitada.</p>
                                </div>
                                <div class="card-body">
                                    <form #f="ngForm">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <mat-label>Empresa</mat-label>
                                                    <mat-select [(value)]="idempresa" name="idEmpresa"
                                                        [(ngModel)]="selectedCatPromotor.idempresa">
                                                        <mat-option [value]="0">--Seleccione una empresa--</mat-option>
                                                        <mat-option *ngFor="let empresa of empresas"
                                                            [value]="empresa.idEmpresa">
                                                            {{empresa.nombreempresa}}
                                                        </mat-option>
                                                        <!--Seccion para cargar datos desde el catalogo de empresa-->
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <!--Campos temporalmente ocultos-->
                                                <div style="display: none;">
                                                    <mat-form-field class="example-full-width" style="display: none">
                                                        <input matInput placeholder="Supervisor" type="text"
                                                            name="idsupervisor"
                                                            [(ngModel)]="selectedCatPromotor.idsupervisor"
                                                            style="display: none">
                                                    </mat-form-field>
                                                    <mat-form-field class="example-full-width" style="display: none">
                                                        <input matInput placeholder="Rol" type="text" name="rol"
                                                            [(ngModel)]="selectedCatPromotor.rol" style="display: none">
                                                    </mat-form-field>
                                                    <mat-form-field class="example-full-width" style="display: none">
                                                        <input matInput placeholder="Estatus" type="text" name="estatus"
                                                            [(ngModel)]="selectedCatPromotor.estatus"
                                                            style="display: none">
                                                    </mat-form-field>
                                                    <mat-form-field class="example-full-width" style="display: none">
                                                        <input matInput placeholder="QR" type="text" name="QR"
                                                            [(ngModel)]="selectedCatPromotor.QR" style="display: none">
                                                    </mat-form-field>
                                                </div>
                                                <!--Fin de la seccion de campos temporalmente ocultos-->
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Nombre" type="text" name="nombre"
                                                        [(ngModel)]="selectedCatPromotor.nombre">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Apellidos" type="text" name="apellidos"
                                                        [(ngModel)]="selectedCatPromotor.apellidos">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Usuario" type="text" name="idusuario"
                                                        [(ngModel)]="selectedCatPromotor.idusuario">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Clave" type="text" name="pwd"
                                                        [(ngModel)]="selectedCatPromotor.pwd">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Confirmacion de la clave" type="text"
                                                        name="pwd_c" [(ngModel)]="selectedCatPromotor.pwd_c">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Correo" type="text" name="correo"
                                                        [(ngModel)]="selectedCatPromotor.correo">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <mat-label>Huso horario</mat-label>
                                                    <mat-select [(value)]="idusohorario" name="idusohorario"
                                                        [(ngModel)]="selectedCatPromotor.idusohorario">
                                                        <mat-option [value]="0">--Seleccione un horario--</mat-option>
                                                        <mat-option *ngFor="let usohorario of usohorarios"
                                                            [value]="usohorario.idusohorario">
                                                            {{usohorario.desc_horario_normal}}
                                                        </mat-option>
                                                        <!--Seccion para cargar datos desde el catalogo de empresa-->
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Usuario de actualizaci√≥n" type="text"
                                                        name="udc1" [(ngModel)]="selectedCatPromotor.uda_c" readonly
                                                        disabled>
                                                </mat-form-field>
                                                <input type="hidden" name="udc" [(ngModel)]="selectedCatPromotor.uda_c">
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Fecha de actualizaci√≥n" type="text"
                                                        name="fdc" [(ngModel)]="selectedCatPromotor.fdc" readonly
                                                        disabled>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Usuario de creaci√≥n" type="text"
                                                        name="uda1" [(ngModel)]="selectedCatPromotor.uda" readonly
                                                        disabled>
                                                </mat-form-field>
                                                <input type="hidden" name="uda" [(ngModel)]="selectedCatPromotor.uda">
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput placeholder="Fecha de creaci√≥n" type="text"
                                                        name="fda" [(ngModel)]="selectedCatPromotor.fda" readonly
                                                        disabled>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <button *ngIf="selectedCatPromotor.idpromotor != null" mat-raised-button
                                            type="submit" class="btn btn-info pull-right"
                                            (click)="setSelectedTab('asignacion_rutas')">Asignar ruta</button>
                                        <button mat-raised-button type="submit" class="btn btn-info pull-right"
                                            (click)="createOrUpdateCatPromotor(f)"
                                            [disabled]="noPermitido">Guardar</button>
                                        <div class="clearfix"></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane " id="asignacion_rutas">
                        <!-- Here is the content -->
                        <br>
                        <div scroll-here class="card">
                            <div id="ref_scroll" class="card-header card-header-tabs card-header-info">
                                <div class="nav-tabs-navigation">
                                    <div class="nav-tabs-wrapper">
                                        <!--<span class="nav-tabs-title">Tasks:</span>-->
                                        <ul class="nav nav-tabs" data-tabs="tabs">
                                            <li class="nav-item active"><a mat-button class="nav-link active"
                                                    href="#lista_rutas_promotor" data-toggle="tab">Rutas del promotor
                                                    <div class="ripple-container"></div>
                                                </a></li>
                                            <li class="nav-item "><a mat-button class="nav-link " href="#asignar_dias"
                                                    data-toggle="tab">Asignar dias<div class="ripple-container"></div>
                                                </a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="tab-content">
                                    <!-- Div dinamico -->
                                    <div class="tab-pane active" id="lista_rutas_promotor">
                                        <!-- Here is the content -->
                                        <br>
                                        <div class="row" *ngIf="selectedCatPromotor.idpromotor != null">
                                            <div class="col-md-12">
                                                <div class="input-group no-border" style="width: 30%">
                                                    <input id="frc" type="text" value="" class="form-control"
                                                        placeholder="Buscar rutas a asignar"
                                                        (keyup)="changeTextSR($event)">

                                                    <button mat-raised-button type="submit" id="btnfrc"
                                                        class="btn btn-white btn-round btn-just-icon"
                                                        (click)="searchSR()" style="visibility: hidden;">
                                                        <i class="material-icons">search</i>
                                                        <div class="ripple-container"></div>
                                                    </button>

                                                    <a class="btn btn-info pull-right" href="javascript:void(0)"
                                                        (click)="searchSR()">
                                                        <i class="material-icons" style="font-size: 20px"
                                                            data-md-tooltip="Buscar">
                                                            search
                                                        </i>
                                                        <div class="ripple-container"></div>
                                                    </a>


                                                </div>
                                                <div id="ra" style="display:none">
                                                    <div class="card">
                                                        <div class="card-header card-header-info">
                                                            <h4 class="card-title ">Rutas disponibles</h4>
                                                        </div>
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <mat-paginator #pag1 *ngIf="rutas != null"
                                                                    [length]="rutas.length"
                                                                    [pageSize]="paginacion1.page_size"
                                                                    [pageSizeOptions]="paginacion1.pageSizeOptions"
                                                                    (page)="paginacion1.handlePage($event)">
                                                                </mat-paginator>
                                                                <table class="table">
                                                                    <thead class=" text-primary">
                                                                        <th
                                                                            style="background-color: #007A87; color: #FFFFFF;">
                                                                            Tienda
                                                                        </th>
                                                                        <th
                                                                            style="background-color: #007A87; color: #FFFFFF;">
                                                                            Direccion
                                                                        </th>
                                                                        <th
                                                                            style="background-color: #007A87; color: #FFFFFF;">
                                                                            Asignar
                                                                        </th>
                                                                        <th
                                                                            style="background-color: #007A87; color: #FFFFFF;">

                                                                        </th>
                                                                    </thead>
                                                                    <tbody *ngIf="rutas != null">
                                                                        <tr
                                                                            *ngFor="let ruta of rutas | paginate:paginacion1.page_size:paginacion1.page_number">
                                                                            <td>
                                                                                {{ruta.Tienda1}}
                                                                            </td>
                                                                            <td>
                                                                                {{ruta.Direccion}}
                                                                            </td>
                                                                            <td>
                                                                                <button mat-raised-button type="button"
                                                                                    class="btn btn-warning pull-right"
                                                                                    (click)="setAsignaRutas(ruta)"
                                                                                    [disabled]="noPermitido">Asignar
                                                                                    ruta</button>
                                                                            </td>
                                                                            <td>
                                                                                <button mat-raised-button type="button"
                                                                                    class="btn btn-warning pull-right"
                                                                                    (click)="showVentana(ruta,1)"
                                                                                    [disabled]="noPermitido">Asignaci&oacute;n
                                                                                    Temporal</button>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row" *ngIf="selectedCatPromotor.idpromotor == null">
                                            <div class="col-md-12">
                                                <h6>No hay ningun promotor seleccionado.</h6>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="selectedCatPromotor.idpromotor != null">
                                            <div class="col-md-12">
                                                <div class="card">
                                                    <div class="card-header card-header-info">
                                                        <h4 class="card-title ">Rutas Asignadas a:
                                                            {{selectedCatPromotor.nombre}}
                                                            {{selectedCatPromotor.apellidos}}</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <mat-paginator #pag2 *ngIf="rutasPorPromotor != null"
                                                                [length]="rutasPorPromotor.length"
                                                                [pageSize]="paginacion2.page_size"
                                                                [pageSizeOptions]="paginacion2.pageSizeOptions"
                                                                (page)="paginacion2.handlePage($event)">
                                                            </mat-paginator>
                                                            <table class="table">
                                                                <thead class=" text-primary">
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Det.
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Tienda
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Direccion
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Uda
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Fda
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Estatus
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Asignar
                                                                        dias
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Desasignar
                                                                    </th>
                                                                </thead>
                                                                <tbody *ngIf="rutasPorPromotor != null">
                                                                    <tr
                                                                        *ngFor="let rutaPorPromotor of rutasPorPromotor | paginate:paginacion2.page_size:paginacion2.page_number">
                                                                        <td>
                                                                            {{rutaPorPromotor.determinante}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.Tienda1}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.Direccion}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.uda}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.fechaasignacion}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.estatus}}
                                                                        </td>
                                                                        <td>
                                                                            <button mat-raised-button type="button"
                                                                                class="btn btn-warning pull-right"
                                                                                (click)="setSelectedTab1('asignar_dias');selectRutaPromotor(rutaPorPromotor)">Asignar
                                                                                dias</button>
                                                                        </td>
                                                                        <td>
                                                                            <button mat-raised-button type="button"
                                                                                class="btn btn-warning pull-right"
                                                                                (click)="desasignarRutasAPromotor(rutaPorPromotor.idrutaasignada)"
                                                                                [disabled]="noPermitido">Desasignar
                                                                                ruta</button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="selectedCatPromotor.idpromotor != null">
                                            <div class="col-md-12">
                                                <div class="card">
                                                    <div class="card-header card-header-info">
                                                        <h4 class="card-title ">Rutas temporales</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <mat-paginator #pag3
                                                                *ngIf="rutasPorPromotorTemporales != null"
                                                                [length]="rutasPorPromotorTemporales.length"
                                                                [pageSize]="paginacion3.page_size"
                                                                [pageSizeOptions]="paginacion3.pageSizeOptions"
                                                                (page)="paginacion3.handlePage($event)">
                                                            </mat-paginator>
                                                            <table class="table">
                                                                <thead class=" text-primary">
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Fecha
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Tienda
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Motivo
                                                                    </th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Asistir</th>
                                                                    <th
                                                                        style="background-color: #007A87; color: #FFFFFF;">
                                                                        Desasignar
                                                                    </th>
                                                                </thead>
                                                                <tbody *ngIf="rutasPorPromotorTemporales != null">
                                                                    <tr
                                                                        *ngFor="let rutaPorPromotor of rutasPorPromotorTemporales | paginate:paginacion3.page_size:paginacion3.page_number">
                                                                        <td>
                                                                            {{rutaPorPromotor.dia}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.Tienda}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.observaciones}}
                                                                        </td>
                                                                        <td>
                                                                            {{rutaPorPromotor.asiste}}
                                                                        </td>
                                                                        <td>
                                                                            <button mat-raised-button type="button"
                                                                                class="btn btn-warning pull-right"
                                                                                (click)="showVentana(rutaPorPromotor,0,1)"
                                                                                [disabled]="noPermitido">Desasignar</button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Inicia bloqueador mientras procesa-->
                                        <div id="bloqueador_asigna_rutas" class="row"
                                            style="position: absolute;width:100%;top:0;left:0;width:100%;height:100%">
                                            <div class="col"
                                                style="background-color:rgba(10, 9, 9, 0.062);z-index:1;display: flex;align-items: center;">
                                                <mat-progress-spinner style="margin: 0 auto;" mode="indeterminate"
                                                    diameter="85" strokeWidth="10">
                                                </mat-progress-spinner>
                                                <div
                                                    style="position:absolute;left:calc((100% /2) - 4%);margin:0 auto;color:blue">
                                                    Cargando...
                                                </div>
                                            </div>
                                        </div>
                                        <!--Fin bloqueador mientras procesa -->
                                    </div>
                                    <div class="tab-pane" id="asignar_dias">
                                        <!-- Here is the content -->
                                        <br>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <form #dias="ngForm">
                                                    <div id="div_dias">
                                                        <div class="card">
                                                            <div class="card-header card-header-info">
                                                                <h4 class="card-title ">Asignar dias a laborar para el
                                                                    promotor:
                                                                    '{{selectedCatPromotor.nombre}}
                                                                    {{selectedCatPromotor.apellidos}}' en la tienda:
                                                                    '{{rutaPromotor.Tienda1}}'
                                                                </h4>
                                                            </div>
                                                            <div class="card-body">
                                                                <div class="table-responsive">
                                                                    <table class="table" style="width: 80%;">
                                                                        <thead class=" text-primary">
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Dia
                                                                            </th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Lunes
                                                                            </th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Martes</th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Miercoles</th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Jueves</th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Viernes</th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Sabado</th>
                                                                            <th
                                                                                style="background-color: #007A87; color: #FFFFFF;">
                                                                                Domingo</th>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr>
                                                                                <td>Seleccion</td>
                                                                                <td>
                                                                                    <mat-checkbox name="lunes"
                                                                                        style="width: 10px;"
                                                                                        [(ngModel)]="rutasPromotorDias.lunes"
                                                                                        (change)="setProponerPrioridad($event,1,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="martes"
                                                                                        [(ngModel)]="rutasPromotorDias.martes"
                                                                                        (change)="setProponerPrioridad($event,2,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="miercoles"
                                                                                        [(ngModel)]="rutasPromotorDias.miercoles"
                                                                                        (change)="setProponerPrioridad($event,3,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="jueves"
                                                                                        [(ngModel)]="rutasPromotorDias.jueves"
                                                                                        (change)="setProponerPrioridad($event,4,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="viernes"
                                                                                        [(ngModel)]="rutasPromotorDias.viernes"
                                                                                        (change)="setProponerPrioridad($event,5,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="sabado"
                                                                                        [(ngModel)]="rutasPromotorDias.sabado"
                                                                                        (change)="setProponerPrioridad($event,6,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-checkbox name="domingo"
                                                                                        [(ngModel)]="rutasPromotorDias.domingo"
                                                                                        (change)="setProponerPrioridad($event,7,rutasPromotorDias)">
                                                                                    </mat-checkbox>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>Prioridad</td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="lunesp"
                                                                                            [(ngModel)]="rutasPromotorDias.lunesp"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,1)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="martesp"
                                                                                            [(ngModel)]="rutasPromotorDias.martesp"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,2)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="miercolesp"
                                                                                            [(ngModel)]="rutasPromotorDias.miercolesp"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,3)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="juevesp"
                                                                                            [(ngModel)]="rutasPromotorDias.juevesp"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,4)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="viernesp"
                                                                                            [(ngModel)]="rutasPromotorDias.viernesp"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,5)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="sabadop"
                                                                                            [(ngModel)]="rutasPromotorDias.sabadop"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,6)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                                <td>
                                                                                    <mat-form-field
                                                                                        class="example-full-width ancho"
                                                                                        style="width: 30px">
                                                                                        <input matInput type="text"
                                                                                            name="domingop"
                                                                                            [(ngModel)]="rutasPromotorDias.domingop"
                                                                                            (change)="changeTextP($event,rutasPromotorDias,7)"
                                                                                            (keydown)="isNumber($event)"
                                                                                            style="width:30px">
                                                                                    </mat-form-field>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="8"
                                                                                    style="text-align: right">
                                                                                    <button mat-raised-button
                                                                                        type="button"
                                                                                        class="btn btn-info pull-right"
                                                                                        (click)="createDias(dias)"
                                                                                        [disabled]="noPermitido">Guardar</button>

                                                                                    <button mat-raised-button
                                                                                        type="button"
                                                                                        class="btn btn-warning pull-right"
                                                                                        (click)="showVentana(rutaPromotor,1)"
                                                                                        [disabled]="noPermitido">Asignaci&oacute;n
                                                                                        Temporal</button>
                                                                                    <button mat-raised-button
                                                                                        type="button"
                                                                                        class="btn btn-warning pull-right"
                                                                                        (click)="showVentana(rutaPromotor,0)"
                                                                                        [disabled]="noPermitido">Desasignaci&oacute;n
                                                                                        Temporal</button>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!--  Ventana Modal -->
    <div class="modal fade" id="ventanaRutasTemporales" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <!--<div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Modal titl</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>-->
                <div class="modal-body" style="overflow: auto">
                    <div class="row">
                        <div class="col-md-6">
                            <mat-form-field *ngIf="desasigna == 0" style="width:100px">
                                <input id="fdia" matInput [matDatepicker]="dia1" type="text" name="dia1"
                                    placeholder="Dia" [(ngModel)]="rutaPromotorTemporal.dia1" disabled>
                                <mat-datepicker-toggle matSuffix [for]="dia1"></mat-datepicker-toggle>
                                <mat-datepicker #dia1 disabled="false"></mat-datepicker>
                            </mat-form-field>
                            <mat-form-field *ngIf="desasigna == 1" style="width:100px">
                                <input id="fdia" matInput type="text" name="dia" placeholder="Dia"
                                    [(ngModel)]="rutaPromotorTemporal.dia" disabled>
                            </mat-form-field>
                            <input *ngIf="desasigna == 0" type="hidden" name="dia"
                                [(ngModel)]="rutaPromotorTemporal.dia1">
                        </div>
                        <div class="col-md-6">
                            <mat-form-field class="example-full-width ancho">
                                <mat-label>Observaciones</mat-label>
                                <textarea matInput type="text" name="observaciones" placeholder="Observaciones"
                                    [(ngModel)]="rutaPromotorTemporal.observaciones" style="width:200px"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button mat-raised-button type="submit" class="btn btn-info pull-right"
                                (click)="setAsignaDesasignaRutaTemporal()">Guardar</button>
                            <button mat-raised-button type="submit" class="btn btn-info pull-right"
                                (click)="cancelar()">Cancelar</button>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!--<div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>-->
            </div>
        </div>
    </div>